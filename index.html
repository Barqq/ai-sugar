<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุฏุงุฑุฉ ูุฑุถ ุงูุณูุฑู - ูุธุงู ุงูุชูุจุค ูุงููุชุงุจุนุฉ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <h1>๐ฉบ ุฅุฏุงุฑุฉ ูุฑุถ ุงูุณูุฑู</h1>
                <nav class="header-nav">
                    <button class="btn btn--outline btn--sm" id="settings-btn">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</button>
                    <button class="btn btn--outline btn--sm" id="history-btn">๐ ุงูุณุฌู</button>
                    <button class="btn btn--outline btn--sm" id="data-btn">๐พ ุงูุจูุงูุงุช</button>
                </nav>
            </div>
        </header>

        <main class="main-content">
            <div class="container">
                <!-- Welcome Screen -->
                <section id="welcome-screen" class="screen active">
                    <div class="welcome-card card">
                        <div class="card__body">
                            <h2>ูุฑุญุจุงู ุจู ูู ูุธุงู ุฅุฏุงุฑุฉ ูุฑุถ ุงูุณูุฑู</h2>
                            <p>ูุธุงู ุฐูู ููุชูุจุค ุจูุณุชูู ุงูุณูุฑ ูู ุงูุฏู ูุญุณุงุจ ุฌุฑุนุฉ ุงูุฃูุณูููู ุงูููุงุณุจุฉ</p>
                            
                            <div class="features-grid">
                                <div class="feature-item">
                                    <span class="feature-icon">๐ฎ</span>
                                    <h3>ุงูุชูุจุค ุงูุฐูู</h3>
                                    <p>ุชููุน ูุณุชูู ุงูุณูุฑ ุฎูุงู 4 ุณุงุนุงุช</p>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">๐</span>
                                    <h3>ุญุณุงุจ ุงูุฃูุณูููู</h3>
                                    <p>ุงุญุณุจ ุงูุฌุฑุนุฉ ุงูููุงุณุจุฉ ุชููุงุฆูุงู</p>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">๐ฅ</span>
                                    <h3>ูุงุนุฏุฉ ุจูุงูุงุช ุดุงููุฉ</h3>
                                    <p>ุฃูุซุฑ ูู 50 ููุน ุทุนุงู ูุน ูุนูููุงุช ููุตูุฉ</p>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">๐</span>
                                    <h3>ุชุชุจุน ุงููุชุงุฆุฌ</h3>
                                    <p>ุงุญูุธ ูุฑุงุฌุน ุชูุจุคุงุชู ุงูุณุงุจูุฉ</p>
                                </div>
                            </div>

                            <div class="medical-disclaimer">
                                <h4>โ๏ธ ุฅุฎูุงุก ุทุจู ููู</h4>
                                <p>ูุฐุง ุงููุธุงู ูุฃุบุฑุงุถ ุชุนููููุฉ ููุท ููุง ูุบูู ุนู ุงุณุชุดุงุฑุฉ ุทุจูุจ ูุฎุชุต. ุงุณุชุดุฑ ุทุจูุจู ุฏุงุฆูุงู ูุจู ุชุนุฏูู ุฌุฑุนุงุช ุงูุฃูุณูููู.</p>
                            </div>

                            <button class="btn btn--primary btn--lg btn--full-width" id="start-btn">
                                ุงุจุฏุฃ ุงูุขู โ 
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Step 1: Personal Information -->
                <section id="step-1" class="screen">
                    <div class="step-header">
                        <div class="step-indicator">
                            <span class="step-number">1</span>
                            <span class="step-title">ุงููุนูููุงุช ุงูุดุฎุตูุฉ</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 25%"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__body">
                            <form id="personal-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">ุงูุนูุฑ (ุณูุฉ)</label>
                                        <input type="number" class="form-control" id="age" min="18" max="100" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ููุน ุงูุณูุฑู</label>
                                        <select class="form-control" id="diabetes-type" required>
                                            <option value="">ุงุฎุชุฑ ุงูููุน</option>
                                            <option value="type1">ุงูููุน ุงูุฃูู</option>
                                            <option value="type2">ุงูููุน ุงูุซุงูู</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">ุงููุฒู (ููููุฌุฑุงู)</label>
                                        <input type="number" class="form-control" id="weight" min="30" max="200" step="0.1" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">ุงูุทูู (ุณู)</label>
                                        <input type="number" class="form-control" id="height" min="120" max="220" required>
                                    </div>
                                </div>

                                <div class="bmi-display" id="bmi-display" style="display: none;">
                                    <h4>ูุคุดุฑ ูุชูุฉ ุงูุฌุณู (BMI)</h4>
                                    <div class="bmi-value" id="bmi-value"></div>
                                    <div class="bmi-category" id="bmi-category"></div>
                                </div>

                                <div class="step-actions">
                                    <button type="button" class="btn btn--outline" id="back-to-welcome">โ ุงูุณุงุจู</button>
                                    <button type="submit" class="btn btn--primary">ุงูุชุงูู โ</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- Step 2: Current Status -->
                <section id="step-2" class="screen">
                    <div class="step-header">
                        <div class="step-indicator">
                            <span class="step-number">2</span>
                            <span class="step-title">ุงูุญุงูุฉ ุงูุญุงููุฉ</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 50%"></div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card__body">
                            <form id="status-form">
                                <div class="form-group">
                                    <label class="form-label">ูุณุชูู ุงูุณูุฑ ุงูุญุงูู (mg/dL)</label>
                                    <input type="number" class="form-control" id="current-bg" min="50" max="500" required>
                                    <div class="glucose-meter" id="glucose-meter">
                                        <div class="glucose-scale">
                                            <div class="scale-marker low">70</div>
                                            <div class="scale-marker normal">120</div>
                                            <div class="scale-marker high">180</div>
                                            <div class="scale-marker danger">250</div>
                                        </div>
                                        <div class="glucose-indicator" id="glucose-indicator"></div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">ุงูููุช ููุฐ ุขุฎุฑ ูุฌุจุฉ</label>
                                    <div class="time-slider-container">
                                        <input type="range" class="time-slider" id="time-since-meal" min="0" max="6" step="0.5" value="0">
                                        <div class="time-labels">
                                            <span>ุงูุขู</span>
                                            <span>1 ุณุงุนุฉ</span>
                                            <span>2 ุณุงุนุฉ</span>
                                            <span>3 ุณุงุนุงุช</span>
                                            <span>4 ุณุงุนุงุช</span>
                                            <span>5 ุณุงุนุงุช</span>
                                            <span>6+ ุณุงุนุงุช</span>
                                        </div>
                                        <div class="time-display" id="time-display">ุงูุขู - ูู ุขูู ุจุนุฏ</div>
                                    </div>
                                </div>

                                <div class="step-actions">
                                    <button type="button" class="btn btn--outline" id="back-to-step-1">โ ุงูุณุงุจู</button>
                                    <button type="submit" class="btn btn--primary">ุงูุชุงูู โ</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- Step 3: Food Selection -->
                <section id="step-3" class="screen">
                    <div class="step-header">
                        <div class="step-indicator">
                            <span class="step-number">3</span>
                            <span class="step-title">ุงุฎุชูุงุฑ ุงูุทุนุงู</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 75%"></div>
                        </div>
                    </div>

                    <div class="food-selection-container">
                        <!-- Search and Filters -->
                        <div class="card food-search-card">
                            <div class="card__body">
                                <div class="search-container">
                                    <input type="text" class="form-control" id="food-search" placeholder="ุงุจุญุซ ุนู ุทุนุงู...">
                                </div>
                                
                                <div class="category-filters">
                                    <button class="filter-btn active" data-category="all">ุงููู</button>
                                    <button class="filter-btn" data-category="ููุงูู">๐ ููุงูู</button>
                                    <button class="filter-btn" data-category="ุญุจูุจ">๐ ุญุจูุจ</button>
                                    <button class="filter-btn" data-category="ุฎุถุฑูุงุช">๐ฅ ุฎุถุฑูุงุช</button>
                                    <button class="filter-btn" data-category="ุฃูุจุงู">๐ฅ ุฃูุจุงู</button>
                                    <button class="filter-btn" data-category="ุจููููุงุช">๐ซ ุจููููุงุช</button>
                                    <button class="filter-btn" data-category="ุญูููุงุช">๐ฐ ุญูููุงุช</button>
                                    <button class="filter-btn" data-category="ูุดุฑูุจุงุช">๐ง ูุดุฑูุจุงุช</button>
                                </div>
                            </div>
                        </div>

                        <div class="food-grid-container">
                            <!-- Food Items -->
                            <div class="card">
                                <div class="card__header">
                                    <h3>ูุงุฆูุฉ ุงูุฃุทุนูุฉ</h3>
                                </div>
                                <div class="card__body">
                                    <div class="food-grid" id="food-grid">
                                        <!-- Food items will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>

                            <!-- Selected Foods Summary -->
                            <div class="card selected-foods-card">
                                <div class="card__header">
                                    <h3>ุงูุฃุทุนูุฉ ุงููุฎุชุงุฑุฉ</h3>
                                    <button class="btn btn--outline btn--sm" id="clear-selection">ูุณุญ ุงููู</button>
                                </div>
                                <div class="card__body">
                                    <div id="selected-foods-list">
                                        <p class="empty-message">ูู ุชุฎุชุฑ ุฃู ุทุนุงู ุจุนุฏ</p>
                                    </div>
                                    <div class="meal-summary" id="meal-summary" style="display: none;">
                                        <div class="summary-item">
                                            <span class="summary-label">ุฅุฌูุงูู ุงููุฑุจูููุฏุฑุงุช:</span>
                                            <span class="summary-value" id="total-carbs">0 ุฌุฑุงู</span>
                                        </div>
                                        <div class="summary-item">
                                            <span class="summary-label">ูุชูุณุท ุงููุคุดุฑ ุงูุฌูุงูุณููู:</span>
                                            <span class="summary-value" id="avg-gi">0</span>
                                        </div>
                                        <div class="summary-item">
                                            <span class="summary-label">ุงูุญูู ุงูุฌูุงูุณููู ุงูุฅุฌูุงูู:</span>
                                            <span class="summary-value" id="total-gl">0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="step-actions">
                            <button type="button" class="btn btn--outline" id="back-to-step-2">โ ุงูุณุงุจู</button>
                            <button type="button" class="btn btn--primary" id="calculate-btn" disabled>ุญุณุงุจ ุงูุชููุนุงุช โ</button>
                        </div>
                    </div>
                </section>

                <!-- Step 4: Results -->
                <section id="step-4" class="screen">
                    <div class="step-header">
                        <div class="step-indicator">
                            <span class="step-number">4</span>
                            <span class="step-title">ุงููุชุงุฆุฌ ูุงูุชูุตูุงุช</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 100%"></div>
                        </div>
                    </div>

                    <div class="results-container">
                        <!-- Key Metrics -->
                        <div class="metrics-grid">
                            <div class="metric-card card">
                                <div class="card__body">
                                    <div class="metric-icon">๐</div>
                                    <div class="metric-label">ุงูุฐุฑูุฉ ุงููุชููุนุฉ</div>
                                    <div class="metric-value" id="peak-bg">-- mg/dL</div>
                                    <div class="metric-time" id="peak-time">--</div>
                                </div>
                            </div>

                            <div class="metric-card card">
                                <div class="card__body">
                                    <div class="metric-icon">โก</div>
                                    <div class="metric-label">ุงูุฒูุงุฏุฉ ุงููุชููุนุฉ</div>
                                    <div class="metric-value" id="bg-increase">+-- mg/dL</div>
                                    <div class="metric-subtitle">ูู ุงููุณุชูู ุงูุญุงูู</div>
                                </div>
                            </div>

                            <div class="metric-card card">
                                <div class="card__body">
                                    <div class="metric-icon">๐</div>
                                    <div class="metric-label">ุฌุฑุนุฉ ุงูุฃูุณูููู</div>
                                    <div class="metric-value" id="insulin-dose">-- ูุญุฏุฉ</div>
                                    <div class="metric-breakdown" id="insulin-breakdown">--</div>
                                </div>
                            </div>

                            <div class="metric-card card">
                                <div class="card__body">
                                    <div class="metric-icon">๐จ</div>
                                    <div class="metric-label">ูุณุชูู ุงูุฎุทุฑ</div>
                                    <div class="metric-value risk-indicator" id="risk-level">--</div>
                                    <div class="metric-subtitle" id="risk-description">--</div>
                                </div>
                            </div>
                        </div>

                        <!-- Blood Glucose Chart -->
                        <div class="card chart-card">
                            <div class="card__header">
                                <h3>ููุญูู ุงูุณูุฑ ุงููุชููุน (4 ุณุงุนุงุช)</h3>
                            </div>
                            <div class="card__body">
                                <div class="chart-container" style="position: relative; height: 400px;">
                                    <canvas id="bg-chart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Recommendations -->
                        <div class="card recommendations-card">
                            <div class="card__header">
                                <h3>ุงูุชูุตูุงุช ุงูุดุฎุตูุฉ</h3>
                            </div>
                            <div class="card__body">
                                <div id="recommendations-list">
                                    <!-- Recommendations will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Medical Disclaimer -->
                        <div class="card disclaimer-card">
                            <div class="card__body">
                                <div class="medical-disclaimer">
                                    <h4>โ๏ธ ุฅุฎูุงุก ุทุจู ููู</h4>
                                    <p>ูุฐู ุงููุชุงุฆุฌ ุชูุฏูุฑูุฉ ูุชุนููููุฉ ููุท. ูุง ุชุนุฏู ุฌุฑุนุฉ ุงูุฃูุณูููู ุฏูู ุงุณุชุดุงุฑุฉ ุทุจูุจ ูุฎุชุต. ูู ุญุงูุงุช ุงูุทูุงุฑุฆุ ุงุชุตู ุจุทุจูุจู ููุฑุงู.</p>
                                </div>
                            </div>
                        </div>

                        <div class="step-actions">
                            <button type="button" class="btn btn--outline" id="back-to-step-3">โ ุชุนุฏูู</button>
                            <button type="button" class="btn btn--secondary" id="save-prediction">๐พ ุญูุธ ุงููุชูุฌุฉ</button>
                            <button type="button" class="btn btn--primary" id="new-calculation">ุญุณุงุจ ุฌุฏูุฏ</button>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ุฅุนุฏุงุฏุงุช ุงููุธุงู</h3>
                    <button class="modal-close" id="close-settings">ร</button>
                </div>
                <div class="modal-body">
                    <form id="settings-form">
                        <div class="form-group">
                            <label class="form-label">ูุณุจุฉ ุงูุฃูุณูููู ูููุฑุจูููุฏุฑุงุช (ICR)</label>
                            <input type="number" class="form-control" id="icr-setting" min="5" max="30" step="0.5">
                            <small>ุฌุฑุงู ูุฑุจูููุฏุฑุงุช ููู ูุญุฏุฉ ุฃูุณูููู</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ูุนุงูู ุญุณุงุณูุฉ ุงูุฃูุณูููู (ISF)</label>
                            <input type="number" class="form-control" id="isf-setting" min="20" max="100" step="5">
                            <small>mg/dL ุงูุฎูุงุถ ููู ูุญุฏุฉ ุฃูุณูููู</small>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ูุณุชูู ุงูุณูุฑ ุงููุณุชูุฏู</label>
                            <input type="number" class="form-control" id="target-bg-setting" min="80" max="140" step="5">
                            <small>mg/dL ุงููุฏู ุงููุซุงูู</small>
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn btn--outline" id="reset-defaults">ุฅุนุงุฏุฉ ุชุนููู</button>
                            <button type="submit" class="btn btn--primary">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- History Modal -->
        <div id="history-modal" class="modal hidden">
            <div class="modal-backdrop"></div>
            <div class="modal-content wide">
                <div class="modal-header">
                    <h3>ุณุฌู ุงูุชูุจุคุงุช</h3>
                    <button class="modal-close" id="close-history">ร</button>
                </div>
                <div class="modal-body">
                    <div id="history-content">
                        <!-- History will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Management Modal -->
        <div id="data-modal" class="modal hidden">
            <div class="modal-backdrop"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช</h3>
                    <button class="modal-close" id="close-data">ร</button>
                </div>
                <div class="modal-body">
                    <div class="data-actions">
                        <div class="action-group">
                            <h4>ุชุตุฏูุฑ ุงูุจูุงูุงุช</h4>
                            <button class="btn btn--outline" id="export-json">ุชุตุฏูุฑ ุงูุจูุงูุงุช (JSON)</button>
                            <button class="btn btn--outline" id="export-csv">ุชุตุฏูุฑ ุงูุณุฌู (CSV)</button>
                        </div>
                        <div class="action-group">
                            <h4>ุงุณุชูุฑุงุฏ ุงูุจูุงูุงุช</h4>
                            <input type="file" id="import-json" accept=".json" style="display: none;">
                            <input type="file" id="import-csv" accept=".csv" style="display: none;">
                            <button class="btn btn--outline" id="import-json-btn">ุงุณุชูุฑุงุฏ ุจูุงูุงุช (JSON)</button>
                            <button class="btn btn--outline" id="import-csv-btn">ุงุณุชูุฑุงุฏ ุฃุทุนูุฉ (CSV)</button>
                        </div>
                        <div class="action-group danger">
                            <h4>ุญุฐู ุงูุจูุงูุงุช</h4>
                            <button class="btn btn--outline" id="clear-history">ูุณุญ ุงูุณุฌู</button>
                            <button class="btn btn--outline danger" id="reset-all">ุฅุนุงุฏุฉ ุชุนููู ูุงูู</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
